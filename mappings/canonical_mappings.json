{
  "version": "1.0",
  "description": "Canonical table mappings for multi-service data transformation",
  "canonical_tables": {
    "tickets": {
      "description": "Service tickets and requests from all services",
      "source_services": ["connectwise", "servicenow", "salesforce"],
      "primary_key": "canonical_id",
      "scd_type": 2,
      "fields": {
        "canonical_id": {
          "type": "string",
          "description": "Unique canonical identifier",
          "required": true
        },
        "source_service": {
          "type": "string",
          "description": "Source service name",
          "required": true
        },
        "source_id": {
          "type": "string",
          "description": "Original ID from source service",
          "required": true
        },
        "tenant_id": {
          "type": "string",
          "description": "Tenant identifier",
          "required": true
        },
        "title": {
          "type": "string",
          "description": "Ticket title/summary"
        },
        "description": {
          "type": "string",
          "description": "Ticket description"
        },
        "status": {
          "type": "string",
          "description": "Ticket status"
        },
        "priority": {
          "type": "string",
          "description": "Ticket priority"
        },
        "created_date": {
          "type": "timestamp",
          "description": "Ticket creation date"
        },
        "updated_date": {
          "type": "timestamp",
          "description": "Last update date"
        },
        "assigned_to": {
          "type": "string",
          "description": "Assigned technician/user"
        },
        "company_id": {
          "type": "string",
          "description": "Associated company ID"
        }
      }
    },
    "time_entries": {
      "description": "Time tracking entries from all services",
      "source_services": ["connectwise", "servicenow"],
      "primary_key": "canonical_id",
      "scd_type": 2,
      "fields": {
        "canonical_id": {
          "type": "string",
          "description": "Unique canonical identifier",
          "required": true
        },
        "source_service": {
          "type": "string",
          "description": "Source service name",
          "required": true
        },
        "source_id": {
          "type": "string",
          "description": "Original ID from source service",
          "required": true
        },
        "tenant_id": {
          "type": "string",
          "description": "Tenant identifier",
          "required": true
        },
        "ticket_id": {
          "type": "string",
          "description": "Associated ticket ID"
        },
        "user_id": {
          "type": "string",
          "description": "User who logged time"
        },
        "hours": {
          "type": "decimal",
          "description": "Hours worked"
        },
        "date_worked": {
          "type": "date",
          "description": "Date work was performed"
        },
        "description": {
          "type": "string",
          "description": "Work description"
        },
        "billable": {
          "type": "boolean",
          "description": "Whether time is billable"
        }
      }
    },
    "companies": {
      "description": "Customer companies from all services",
      "source_services": ["connectwise", "salesforce"],
      "primary_key": "canonical_id",
      "scd_type": 2,
      "fields": {
        "canonical_id": {
          "type": "string",
          "description": "Unique canonical identifier",
          "required": true
        },
        "source_service": {
          "type": "string",
          "description": "Source service name",
          "required": true
        },
        "source_id": {
          "type": "string",
          "description": "Original ID from source service",
          "required": true
        },
        "tenant_id": {
          "type": "string",
          "description": "Tenant identifier",
          "required": true
        },
        "name": {
          "type": "string",
          "description": "Company name"
        },
        "type": {
          "type": "string",
          "description": "Company type"
        },
        "status": {
          "type": "string",
          "description": "Company status"
        },
        "phone": {
          "type": "string",
          "description": "Primary phone number"
        },
        "email": {
          "type": "string",
          "description": "Primary email"
        },
        "website": {
          "type": "string",
          "description": "Company website"
        },
        "address": {
          "type": "string",
          "description": "Company address"
        }
      }
    },
    "contacts": {
      "description": "Contact persons from all services",
      "source_services": ["connectwise", "salesforce"],
      "primary_key": "canonical_id",
      "scd_type": 2,
      "fields": {
        "canonical_id": {
          "type": "string",
          "description": "Unique canonical identifier",
          "required": true
        },
        "source_service": {
          "type": "string",
          "description": "Source service name",
          "required": true
        },
        "source_id": {
          "type": "string",
          "description": "Original ID from source service",
          "required": true
        },
        "tenant_id": {
          "type": "string",
          "description": "Tenant identifier",
          "required": true
        },
        "company_id": {
          "type": "string",
          "description": "Associated company ID"
        },
        "first_name": {
          "type": "string",
          "description": "Contact first name"
        },
        "last_name": {
          "type": "string",
          "description": "Contact last name"
        },
        "email": {
          "type": "string",
          "description": "Contact email"
        },
        "phone": {
          "type": "string",
          "description": "Contact phone"
        },
        "title": {
          "type": "string",
          "description": "Job title"
        },
        "active": {
          "type": "boolean",
          "description": "Whether contact is active"
        }
      }
    }
  }
}